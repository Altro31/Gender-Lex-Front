---
import ResultContainer from "@/sections/analysis/components/ResultContainer.astro"
import { genderLex } from "@/services/domain/gender-lex"
import { RequestRepository } from "@/services/domain/request"
import { extractPDFText } from "@/services/pdf/extract-pdf-text"

interface Props {
    text?: string
    file?: string
}

const { text, file } = Astro.props

const analizeText = file ? await extractPDFText(file) : text

const res = await genderLex(analizeText ?? "")
const analysisData = res.object

RequestRepository.create(analysisData, Astro.request)
---

<ResultContainer data={analysisData} />
