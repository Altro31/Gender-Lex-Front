---
import { Input } from "~ui/input"
---

<analyze-text-input class="flex-1">
    <Input
        type="text"
        className="rounded-xl pl-4 pr-24"
        placeholder="Analizar un texto..."
        id="analyze-text"
        name="text"
    />
</analyze-text-input>

<script>
    import { $analyzeText } from "@/sections/home/stores/analyle-text"

    class AnalyzeTextInput extends HTMLElement {
        connectedCallback() {
            const text: HTMLInputElement | null =
                this.querySelector("#analyze-text")
            text?.addEventListener("input", (e) => {
                const target = e.target as HTMLInputElement | null
                if (!target) return
                $analyzeText.set(target.value)
            })
        }
    }

    customElements.define("analyze-text-input", AnalyzeTextInput)
</script>
